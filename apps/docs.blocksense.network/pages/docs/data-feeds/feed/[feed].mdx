import { DataFeedPage } from '@/components/DynamicRouting/[feed].tsx';
import { Error404 } from '@/components/common/Error404';

import React from 'react';
import { decodeFeedsConfig } from '@blocksense/config-types/data-feeds-config';
import { DataFeedCardSection } from '@/components/DataFeeds/DataFeedCardSection';
import { DataFeedCardContentItem } from '@/components/DataFeeds/DataFeedCardContentItem';
import { DataFeedCardExtraContent } from '@/components/DataFeeds/DataFeedCardExtraContent';

import DATA_FEEDS from '@blocksense/monorepo/feeds_config';

export const getStaticPaths = (async () => {
  const feedsConfig = decodeFeedsConfig(DATA_FEEDS);
  const paths = feedsConfig.feeds.map(feed => ({
    params: { feed: String(feed.id) },
  }));

return { paths, fallback: false };
})

export const getStaticProps = (async context => {
  const feedId = context.params?.['feed']

const feedsConfig = decodeFeedsConfig(DATA_FEEDS);

const feed = feedsConfig.feeds.find(feed => feed.id === Number(feedId));

return { props: { feed }, revalidate: false };
})

export default function FeedPage({ feed }) {
  if (!feed) {
    return <Error404 />;
  } else {
    return <DataFeedPage feed={feed} />;
  }
}
