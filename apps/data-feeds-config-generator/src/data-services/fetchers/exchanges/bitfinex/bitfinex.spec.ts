import { describe, expect, test } from 'vitest';
import { splitPair } from './bitfinex';
import { unsafeDivide } from 'effect/Duration';

describe('Tests for `splitPair`', async () => {
  test('should split pairs with `:` correctly', () => {
    const input = '1INCH:USD';
    const expectedOutput = { pair: { base: '1INCH', quote: 'USD' } };
    expect(splitPair(input)).toEqual(expectedOutput);
  });

  test('should split pairs with length 6 correctly', () => {
    const input = 'ALG:USD';
    const expectedOutput = { pair: { base: 'ALG', quote: 'USD' } };
    expect(splitPair(input)).toEqual(expectedOutput);
  });

  test('should throw error otherwise', () => {
    const inputs = ['USD', '1INCHUSD'];
    inputs.map(input => {
      expect(() => splitPair(input)).toThrowError();
    });
  });

  test('snapshot', async () => {
    const inputs = [
      '1INCH:USD',
      '1INCH:UST',
      'AAVE:USD',
      'AAVE:UST',
      'ADABTC',
      'ADAUSD',
      'ADAUST',
      'AIOZ:USD',
      'ALGUSD',
      'ALT11M2507:USD',
      'ALT11M2507:UST',
      'ALT11M250830:USD',
      'ALT11M250830:UST',
      'ALT11M251029:USD',
      'ALT11M251029:UST',
      'ALT2612:USD',
      'ALT2612:UST',
      'AMPUSD',
      'AMPUST',
      'APENFT:USD',
      'APEUSD',
      'APEUST',
      'APTUSD',
      'APTUST',
      'ARBUSD',
      'ARBUST',
      'ATHUSD',
      'ATHUST',
      'ATOUSD',
      'ATOUST',
      'AUSDT:USD',
      'AUSDT:UST',
      'AVAX:BTC',
      'AVAX:USD',
      'AVAX:UST',
      'AZERO:USD',
      'AZERO:UST',
      'B2MUSD',
      'B2MUST',
      'BCHN:USD',
      'BEST:USD',
      'BGBUSD',
      'BGBUST',
      'BLAST:USD',
      'BLAST:UST',
      'BONK:USD',
      'BONK:UST',
      'BTC:XAUT',
      'BTCEUR',
      'BTCGBP',
      'BTCJPY',
      'BTCTRY',
      'BTCUSD',
      'BTCUST',
      'BTTUSD',
      'BXNUSD',
      'BXNUST',
      'CCDUSD',
      'CCDUST',
      'CELO:USD',
      'CELO:UST',
      'CHEX:USD',
      'CHZUSD',
      'CHZUST',
      'CNHT:USD',
      'COMP:USD',
      'COMP:UST',
      'CRVUSD',
      'CRVUST',
      'DAIUSD',
      'DOGE:BTC',
      'DOGE:USD',
      'DOGE:UST',
      'DOPUSD',
      'DOPUST',
      'DOTUSD',
      'DOTUST',
      'DSHBTC',
      'DSHUSD',
      'DYMUSD',
      'DYMUST',
      'EGLD:USD',
      'EGLD:UST',
      'EIGEN:USD',
      'EIGEN:UST',
      'ENAUSD',
      'ENAUST',
      'EOSBTC',
      'EOSUSD',
      'EOSUST',
      'ETCBTC',
      'ETCUSD',
      'ETCUST',
      'ETH2X:ETH',
      'ETH2X:USD',
      'ETH2X:UST',
      'ETH:XAUT',
      'ETHBTC',
      'ETHEUR',
      'ETHGBP',
      'ETHJPY',
      'ETHUSD',
      'ETHUST',
      'ETHW:USD',
      'ETHW:UST',
      'EURQ:USD',
      'EURQ:UST',
      'EURUST',
      'EUTUSD',
      'EUTUST',
      'FETUSD',
      'FETUST',
      'FILUSD',
      'FILUST',
      'FLOKI:USD',
      'FLOKI:UST',
      'FTMUSD',
      'FTMUST',
      'GALA:USD',
      'GALA:UST',
      'GBPUST',
      'GMMT:USD',
      'GMMT:UST',
      'GOMINING:USD',
      'GOMINING:UST',
      'GRTUSD',
      'GRTUST',
      'GTXUSD',
      'GTXUST',
      'HILSV:USD',
      'HIXUSD',
      'HIXUST',
      'HMSTR:USD',
      'HMSTR:UST',
      'HTXUSD',
      'HTXUST',
      'ICPUSD',
      'ICPUST',
      'IOTBTC',
      'IOTUSD',
      'JASMY:USD',
      'JASMY:UST',
      'JPYUST',
      'JSTUSD',
      'JSTUST',
      'JUPUSD',
      'JUPUST',
      'JUSTICE:USD',
      'JUSTICE:UST',
      'KANUSD',
      'KANUST',
      'KARATE:USD',
      'KARATE:UST',
      'KAVA:USD',
      'KAVA:UST',
      'KMNO:USD',
      'KMNO:UST',
      'LDOUSD',
      'LDOUST',
      'LEOBTC',
      'LEOETH',
      'LEOUSD',
      'LEOUST',
      'LIFIII:USD',
      'LIFIII:UST',
      'LINK:USD',
      'LINK:UST',
      'LTCBTC',
      'LTCUSD',
      'LTCUST',
      'MANEKI:USD',
      'MANEKI:UST',
      'MATIC:BTC',
      'MATIC:USD',
      'MATIC:UST',
      'MEWUSD',
      'MEWUST',
      'MIMUSD',
      'MIMUST',
      'MKRUSD',
      'MKRUST',
      'MLNUSD',
      'MNAUSD',
      'MPCUSD',
      'MPCUST',
      'MXNT:USD',
      'NEAR:USD',
      'NEAR:UST',
      'NEOUSD',
      'NEOUST',
      'NEXO:BTC',
      'NEXO:USD',
      'NEXO:UST',
      'NOTUSD',
      'NOTUST',
      'NYMUSD',
      'NYMUST',
      'OMGBTC',
      'OMGUSD',
      'OMNUSD',
      'OPXUSD',
      'OPXUST',
      'PEPE:USD',
      'PEPE:UST',
      'PNKUSD',
      'POLUSD',
      'POLUST',
      'RRTUSD',
      'SAND:USD',
      'SAND:UST',
      'SCROLL:USD',
      'SCROLL:UST',
      'SEIUSD',
      'SEIUST',
      'SHIB:USD',
      'SHIB:UST',
      'SOLBTC',
      'SOLUSD',
      'SOLUST',
      'SPEC:USD',
      'SPEC:UST',
      'SPELL:USD',
      'SPELL:UST',
      'STGUSD',
      'STGUST',
      'STRK:USD',
      'STRK:UST',
      'SUIUSD',
      'SUIUST',
      'SUNUSD',
      'SUNUST',
      'SUSHI:USD',
      'SUSHI:UST',
      'SWEAT:USD',
      'SWEAT:UST',
      'TESTADA:TESTUSD',
      'TESTALGO:TESTUSD',
      'TESTAPT:TESTUSD',
      'TESTAVAX:TESTUSD',
      'TESTBTC:TESTUSD',
      'TESTBTC:TESTUSDT',
      'TESTDOGE:TESTUSD',
      'TESTDOT:TESTUSD',
      'TESTEOS:TESTUSD',
      'TESTETH:TESTUSD',
      'TESTFIL:TESTUSD',
      'TESTLTC:TESTUSD',
      'TESTMATIC:TESTUSD',
      'TESTMATIC:TESTUSDT',
      'TESTNEAR:TESTUSD',
      'TESTSOL:TESTUSD',
      'TESTXAUT:TESTUSD',
      'TESTXTZ:TESTUSD',
      'TIAUSD',
      'TIAUST',
      'TITAN1:GBP',
      'TITAN1:USD',
      'TITAN2:GBP',
      'TITAN2:USD',
      'TOKEN:USD',
      'TOKEN:UST',
      'TOMI:USD',
      'TOMI:UST',
      'TONUSD',
      'TONUST',
      'TRXBTC',
      'TRXEUR',
      'TRXUSD',
      'TRXUST',
      'TRYUST',
      'TSDUSD',
      'TSDUST',
      'TURBO:USD',
      'TURBO:UST',
      'UDCUSD',
      'UDCUST',
      'UNIUSD',
      'UNIUST',
      'UOSBTC',
      'UOSUSD',
      'USDQ:USD',
      'USDQ:UST',
      'UST:CNHT',
      'UST:MXNT',
      'USTBL:USD',
      'USTBL:UST',
      'USTUSD',
      'UXLINK:USD',
      'UXLINK:UST',
      'VELAR:USD',
      'VELAR:UST',
      'WBTBTC',
      'WBTUSD',
      'WHBT:USD',
      'WHBT:UST',
      'WIFUSD',
      'WIFUST',
      'WILD:USD',
      'WOOUSD',
      'WOOUST',
      'XAUT:BTC',
      'XAUT:USD',
      'XAUT:UST',
      'XDCUSD',
      'XDCUST',
      'XLMBTC',
      'XLMUSD',
      'XLMUST',
      'XMRBTC',
      'XMRUSD',
      'XMRUST',
      'XRDBTC',
      'XRDUSD',
      'XRPBTC',
      'XRPUSD',
      'XRPUST',
      'XTPUSD',
      'XTPUST',
      'XTZUSD',
      'YFIUSD',
      'YFIUST',
      'ZECBTC',
      'ZECUSD',
      'ZKXUSD',
      'ZKXUST',
      'ZROUSD',
      'ZROUST',
      'ZRXUSD',
    ];
    const result = inputs.map(input => {
      return splitPair(input);
    });
    await expect(result).toMatchFileSnapshot('./test/splitPair.output.json');
  });
});
